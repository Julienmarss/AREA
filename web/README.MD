# ğŸ“± Frontend Documentation - AREA

## ğŸ—‚ï¸ Structure du projet

```
web/src/
â”œâ”€â”€ App.tsx                          # Point d'entrÃ©e + Routes
â”œâ”€â”€ main.tsx                         # Bootstrap React
â”œâ”€â”€ index.css                        # Styles globaux (Tailwind)
â”‚
â”œâ”€â”€ pages/                           # Pages de l'application
â”‚   â”œâ”€â”€ Home.tsx                     # Page d'accueil (/)
â”‚   â”œâ”€â”€ Register.tsx                 # Inscription (/register)
â”‚   â”œâ”€â”€ Login.tsx                    # Connexion (/login)
â”‚   â”œâ”€â”€ Dashboard.tsx                # Tableau de bord (/dashboard) ğŸ”’
â”‚   â”œâ”€â”€ Services.tsx                 # Connexion services (/services) ğŸ”’
â”‚   â””â”€â”€ areas/
â”‚       â”œâ”€â”€ CreateArea.tsx           # CrÃ©er AREA (/areas/create) ğŸ”’
â”‚       â””â”€â”€ AreaList.tsx             # Liste AREAs (non utilisÃ©)
â”‚
â”œâ”€â”€ components/                      # Composants rÃ©utilisables
â”‚   â”œâ”€â”€ Layout.tsx                   # Layout principal (Nav + Main)
â”‚   â”œâ”€â”€ ProtectedRoute.tsx           # HOC pour routes protÃ©gÃ©es
â”‚   â””â”€â”€ services/                    # Composants services (non utilisÃ©s)
â”‚       â”œâ”€â”€ ServiceCard.tsx
â”‚       â”œâ”€â”€ GitHubConnect.tsx
â”‚       â”œâ”€â”€ DiscordConnect.tsx
â”‚       â””â”€â”€ SpotifyConnect.tsx
â”‚
â”œâ”€â”€ contexts/                        # Context API
â”‚   â””â”€â”€ AuthContext.tsx              # Gestion auth globale
â”‚
â”œâ”€â”€ services/                        # Appels API
â”‚   â””â”€â”€ api.ts                       # API centralisÃ©e
â”‚
â”œâ”€â”€ types/                           # Types TypeScript
â”‚   â””â”€â”€ index.ts                     # Interfaces globales
â”‚
â””â”€â”€ vite-env.d.ts                    # Types Vite
```

---

## ğŸ¯ Pages principales

### 1. Home (`/`)
**Fichier** : `pages/Home.tsx`  
**AccÃ¨s** : Public  
**Description** : Page d'accueil avec prÃ©sentation du projet
```tsx
- PrÃ©sentation AREA
- Statistiques (services, actions, reactions)
- Liste des services disponibles
- Exemples d'automations
- Bouton Download APK
- Informations about.json
```

### 2. Register (`/register`)
**Fichier** : `pages/Register.tsx`  
**AccÃ¨s** : Public  
**Description** : Inscription utilisateur
```tsx
Formulaire:
- Email
- Password (min 6 caractÃ¨res)
- First Name
- Last Name

â†’ CrÃ©e un compte
â†’ GÃ©nÃ¨re un JWT token
â†’ Redirect vers /dashboard
```

### 3. Login (`/login`)
**Fichier** : `pages/Login.tsx`  
**AccÃ¨s** : Public  
**Description** : Connexion utilisateur
```tsx
Formulaire:
- Email
- Password

â†’ Valide les credentials
â†’ Retourne un JWT token
â†’ Redirect vers /dashboard
```

### 4. Dashboard (`/dashboard`) ğŸ”’
**Fichier** : `pages/Dashboard.tsx`  
**AccÃ¨s** : ProtÃ©gÃ© (JWT requis)  
**Description** : Tableau de bord principal
```tsx
Affiche:
- Stats: Services connectÃ©s (X/3)
- Stats: AREAs actives
- Stats: Total AREAs
- Statuts des services (GitHub, Discord, Spotify)
- Liste des AREAs avec actions:
  - Enable/Disable
  - Delete
- Quick actions:
  - Connect Services
  - Create AREA
```

### 5. Services (`/services`) ğŸ”’
**Fichier** : `pages/Services.tsx`  
**AccÃ¨s** : ProtÃ©gÃ© (JWT requis)  
**Description** : Connexion des services externes
```tsx
Sections:
1. GitHub:
   - Input: Personal Access Token
   - Bouton: Connect GitHub
   
2. Discord:
   - Input: Bot Token
   - Input: Guild ID
   - Bouton: Connect Discord
   
3. Spotify:
   - Bouton: Connect with Spotify (OAuth2)

Affiche le statut de chaque service (Connected/Not connected)
```

### 6. Create AREA (`/areas/create`) ğŸ”’
**Fichier** : `pages/areas/CreateArea.tsx`  
**AccÃ¨s** : ProtÃ©gÃ© (JWT requis)  
**Description** : CrÃ©ation d'AREA avec wizard
```tsx
Wizard 4 Ã©tapes:

Step 1: Name
- Nom de l'AREA (requis)
- Description (optionnel)

Step 2: Action
- SÃ©lection du service (GitHub/Discord/Spotify)
- SÃ©lection du type d'Action
- Filtrage: affiche uniquement services connectÃ©s

Step 3: REAction
- SÃ©lection du service (GitHub/Discord/Spotify)
- SÃ©lection du type de REAction
- Filtrage: affiche uniquement services connectÃ©s

Step 4: Review
- RÃ©capitulatif complet
- Preview: Action â†’ REAction
- Bouton: Create AREA
- Redirect vers /dashboard aprÃ¨s succÃ¨s
```

---

## ğŸ” Authentification

### AuthContext
**Fichier** : `contexts/AuthContext.tsx`

```tsx
interface AuthContextType {
  user: User | null;
  token: string | null;
  login: (email, password) => Promise<void>;
  register: (email, password, firstName, lastName) => Promise<void>;
  logout: () => void;
  isLoading: boolean;
}
```

**Usage** :
```tsx
import { useAuth } from '../contexts/AuthContext';

function MyComponent() {
  const { user, login, logout } = useAuth();
  
  if (!user) return <div>Not logged in</div>;
  
  return <div>Hello {user.firstName}!</div>;
}
```

**Storage** : Token JWT stockÃ© dans `localStorage('area_token')`

---

## ğŸŒ API Service

### Fichier : `services/api.ts`

**APIs disponibles** :
```typescript
// Authentication
authAPI.register(email, password, firstName, lastName)
authAPI.login(email, password)
authAPI.me()

// GitHub
githubAPI.getStatus()
githubAPI.connect(accessToken)

// Discord
discordAPI.getStatus()
discordAPI.connect(botToken, guildId)

// Spotify
spotifyAPI.getStatus(userId)
spotifyAPI.initiateAuth(userId)
spotifyAPI.disconnect(userId)

// AREAs
areasAPI.getAll(userId?)
areasAPI.getById(id)
areasAPI.create(areaData)
areasAPI.update(id, updates)
areasAPI.delete(id)
areasAPI.toggle(id)
areasAPI.test(id)

// About
aboutAPI.getInfo()
```

**Exemple d'utilisation** :
```tsx
import { githubAPI } from '../services/api';

const handleConnect = async () => {
  try {
    await githubAPI.connect(token);
    console.log('Connected!');
  } catch (error) {
    console.error('Failed:', error.message);
  }
};
```

---

## ğŸ›¡ï¸ Routes protÃ©gÃ©es

### ProtectedRoute
**Fichier** : `components/ProtectedRoute.tsx`

```tsx
// Usage dans App.tsx
<Route 
  path="/dashboard" 
  element={
    <ProtectedRoute>
      <Dashboard />
    </ProtectedRoute>
  } 
/>
```
---

## ğŸ”„ Flow d'authentification

```
1. User arrive sur /login
   â†“
2. Entre email + password
   â†“
3. Submit â†’ authAPI.login(email, password)
   â†“
4. Backend retourne { token, user }
   â†“
5. Frontend stocke token dans localStorage
   â†“
6. AuthContext met Ã  jour user
   â†“
7. Redirect vers /dashboard
   â†“
8. Toutes les requÃªtes incluent:
   Header: "Authorization: Bearer {token}"
```

---

## ğŸ“± Pages publiques vs protÃ©gÃ©es

### Publiques (accessible sans login)
- âœ… `/` - Home
- âœ… `/register` - Register
- âœ… `/login` - Login

### ProtÃ©gÃ©es (JWT requis)
- ğŸ”’ `/dashboard` - Dashboard
- ğŸ”’ `/services` - Services
- ğŸ”’ `/areas/create` - Create AREA

---

## ğŸ”§ Configuration

### Variables d'environnement
**Fichier** : `.env` (Ã  crÃ©er)

```env
VITE_API_URL=http://localhost:8080
```

**Usage** :
```typescript
const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:8080';
```

---

## ğŸš€ Commandes

```bash
# Installation
npm install

# DÃ©veloppement (port 8081)
npm run dev

# Build production
npm run build

# Preview production
npm run preview

# Lint
npm run lint
```

---